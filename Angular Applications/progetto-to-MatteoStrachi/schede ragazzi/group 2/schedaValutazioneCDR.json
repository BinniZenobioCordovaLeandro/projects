[{
  "id": null,
  "insertUserId": 4,
  "insertUser": "Katie Wilson",
  "insertTimeUTC": 1538642228432,
  "insertTime": 1538642228432,
  "updateUserId": 4,
  "updateUser": "Katie Wilson",
  "updateTimeUTC": 1540389477888,
  "updateTime": 1540389477888,
  "organizationId": 2,
  "valid": true,
  "cancellationTime": null,
  "cancellationUser": null,
  "cancellationUserId": null,
  "cancellationTimeUTC": null,
  "name": "Valutazione complessiva della gravità - Clinical Dementia Rating Scale (CDR)",
  "code": "schedaValutazioneCDR",
  "html": "<div class=\"panel panel-body\">\n  <div class=\"form-horizontal\" ng-click=\"calcoloCDR();\">\n    <div class=\"row\">\n      <div class=\"col-md-12 col-lg-12\">\n        <div class=\"form-group\">\n          <label class=\"col-md-3 col-lg-3\">Memoria</label>\n          \n          <div class=\"col-md-6 col-lg-5\">\n            <label class=\"ui-radio\"><input ng-change=\"formData.Memoria={code:'op1a',score:0}\" ng-model=\"formData.Memoria.code\" value=\"op1a\" type=\"radio\" ng-checked=\"true\"><span>Normale</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.Memoria={code:'op1b',score:0.5}\" ng-model=\"formData.Memoria.code\" value=\"op1b\" type=\"radio\"><span>Incerta</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.Memoria={code:'op1c',score:1}\" ng-model=\"formData.Memoria.code\" value=\"op1c\" type=\"radio\"><span>Lieve</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.Memoria={code:'op1d',score:2}\" ng-model=\"formData.Memoria.code\" value=\"op1d\" type=\"radio\"><span>Moderata</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.Memoria={code:'op1e',score:3}\" ng-model=\"formData.Memoria.code\" value=\"op1e\" type=\"radio\"><span>Grave</span></label>\n            <input summary=\"CDRMemoria\" ng-model=\"formData.Memoria.score\" ng-show=\"false\" type=\"number\">\n          </div>\n        \n          <div class=\"col-md-3 col-lg-3\">\n            <input class=\"form-control\" ng-model=\"formData.MemoriaAltro\" summary=\"MemoriaAltro\" type=\"text\">\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-12 col-lg-12\">\n        <div class=\"form-group\">\n          <label class=\"col-md-3 col-lg-3\">Orientamento</label>\n          <div class=\"col-md-6 col-lg-5\">\n            <label class=\"ui-radio\"><input ng-change=\"formData.Orientamento={code:'op2a',score:0}\" ng-model=\"formData.Orientamento.code\" value=\"op2a\" type=\"radio\" ng-checked=\"true\"><span>Normale</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.Orientamento={code:'op2b',score:0.5}\" ng-model=\"formData.Orientamento.code\" value=\"op2b\" type=\"radio\"><span>Incerta</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.Orientamento={code:'op2c',score:1}\" ng-model=\"formData.Orientamento.code\" value=\"op2c\" type=\"radio\"><span>Lieve</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.Orientamento={code:'op2d',score:2}\" ng-model=\"formData.Orientamento.code\" value=\"op2d\" type=\"radio\"><span>Moderata</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.Orientamento={code:'op2e',score:3}\" ng-model=\"formData.Orientamento.code\" value=\"op2e\" type=\"radio\"><span>Grave</span></label>\n            <input summary=\"CDROrientamento\" ng-model=\"formData.Orientamento.score\" ng-show=\"false\" type=\"number\">\n          </div>\n          <div class=\"col-md-3 col-lg-3\">\n            <input class=\"form-control\" ng-model=\"formData.OrientamentoAltro\" summary=\"OrientamentoAltro\" type=\"text\">\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-12 col-lg-12\">\n        <div class=\"form-group\">\n          <label class=\"col-md-3 col-lg-3\">Giudizio e risoluzione di problemi</label>\n          <div class=\"col-md-6 col-lg-5\">\n            <label class=\"ui-radio\"><input ng-change=\"formData.GRProblemi={code:'op3a',score:0}\" ng-model=\"formData.GRProblemi.code\" value=\"op3a\" type=\"radio\" ng-checked=\"true\"><span>Normale</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.GRProblemi={code:'op3b',score:0.5}\" ng-model=\"formData.GRProblemi.code\" value=\"op3b\" type=\"radio\"><span>Incerta</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.GRProblemi={code:'op3c',score:1}\" ng-model=\"formData.GRProblemi.code\" value=\"op3c\" type=\"radio\"><span>Lieve</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.GRProblemi={code:'op3d',score:2}\" ng-model=\"formData.GRProblemi.code\" value=\"op3d\" type=\"radio\"><span>Moderata</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.GRProblemi={code:'op3e',score:3}\" ng-model=\"formData.GRProblemi.code\" value=\"op3e\" type=\"radio\"><span>Grave</span></label>\n            <input summary=\"CDRGRProblemi\" ng-model=\"formData.GRProblemi.score\" ng-show=\"false\" type=\"number\">\n          </div>\n          <div class=\"col-md-3 col-lg-3\">\n            <input class=\"form-control\" ng-model=\"formData.GRProblemiAltro\" summary=\"GRProblemiAltro\" type=\"text\">\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-12 col-lg-12\">\n        <div class=\"form-group\">\n          <label class=\"col-md-3 col-lg-3\">Attività sociali</label>\n          <div class=\"col-md-6 col-lg-5\">\n            <label class=\"ui-radio\"><input ng-change=\"formData.ASociale={code:'op4a',score:0}\" ng-model=\"formData.ASociale.code\" value=\"op4a\" type=\"radio\" ng-checked=\"true\"><span>Normale</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.ASociale={code:'op4b',score:0.5}\" ng-model=\"formData.ASociale.code\" value=\"op4b\" type=\"radio\"><span>Incerta</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.ASociale={code:'op4c',score:1}\" ng-model=\"formData.ASociale.code\" value=\"op4c\" type=\"radio\"><span>Lieve</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.ASociale={code:'op4d',score:2}\" ng-model=\"formData.ASociale.code\" value=\"op4d\" type=\"radio\"><span>Moderata</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.ASociale={code:'op4e',score:3}\" ng-model=\"formData.ASociale.code\" value=\"op4e\" type=\"radio\"><span>Grave</span></label>\n            <input summary=\"CDRASociale\" ng-model=\"formData.ASociale.score\" ng-show=\"false\" type=\"number\">\n          </div>\n          <div class=\"col-md-3 col-lg-3\">\n            <input class=\"form-control\" ng-model=\"formData.ASocialeAltro\" summary=\"ASocialeAltro\" type=\"text\">\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-12 col-lg-12\">\n        <div class=\"form-group\">\n          <label class=\"col-md-3 col-lg-3\">Attività domestiche, hobby</label>\n          <div class=\"col-md-6 col-lg-5\">\n            <label class=\"ui-radio\"><input ng-change=\"formData.ADomestiche={code:'op5a',score:0}\" ng-model=\"formData.ADomestiche.code\" value=\"op5a\" type=\"radio\" ng-checked=\"true\"><span>Normale</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.ADomestiche={code:'op5b',score:0.5}\" ng-model=\"formData.ADomestiche.code\" value=\"op5b\" type=\"radio\"><span>Incerta</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.ADomestiche={code:'op5c',score:1}\" ng-model=\"formData.ADomestiche.code\" value=\"op5c\" type=\"radio\"><span>Lieve</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.ADomestiche={code:'op5d',score:2}\" ng-model=\"formData.ADomestiche.code\" value=\"op5d\" type=\"radio\"><span>Moderata</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.ADomestiche={code:'op5e',score:3}\" ng-model=\"formData.ADomestiche.code\" value=\"op5e\" type=\"radio\"><span>Grave</span></label>\n            <input summary=\"CDRADomestiche\" ng-model=\"formData.ADomestiche.score\" ng-show=\"false\" type=\"number\">\n          </div>\n          <div class=\"col-md-3 col-lg-3\">\n            <input class=\"form-control\" ng-model=\"formData.ADomesticheAltro\" summary=\"ADomesticheAltro\" type=\"text\">\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-12 col-lg-12\">\n        <div class=\"form-group\">\n          <label class=\"col-md-3 col-lg-3\">Cura personale</label>\n          <div class=\"col-md-6 col-lg-5\">\n            <label class=\"ui-radio\"><input ng-change=\"formData.CPersonale={code:'op6a',score:0}\" ng-model=\"formData.CPersonale.code\" value=\"op6a\" type=\"radio\" ng-checked=\"true\"><span>Normale</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.CPersonale={code:'op6b',score:0.5}\" ng-model=\"formData.CPersonale.code\" value=\"op6b\" type=\"radio\"><span>Incerta</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.CPersonale={code:'op6c',score:1}\" ng-model=\"formData.CPersonale.code\" value=\"op6c\" type=\"radio\"><span>Lieve</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.CPersonale={code:'op6d',score:2}\" ng-model=\"formData.CPersonale.code\" value=\"op6d\" type=\"radio\"><span>Moderata</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.CPersonale={code:'op6e',score:3}\" ng-model=\"formData.CPersonale.code\" value=\"op6e\" type=\"radio\"><span>Grave</span></label>\n            <input summary=\"CDRCPersonale\" ng-model=\"formData.CPersonale.score\" ng-show=\"false\" type=\"number\">\n          </div>\n          <div class=\"col-md-3 col-lg-3\">\n            <input class=\"form-control\" ng-model=\"formData.CPersonaleAltro\" summary=\"CPersonaleAltro\" type=\"text\">\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-12 col-lg-12\">\n        <div class=\"form-group\">\n          <label class=\"col-md-3 col-lg-3\">Ulteriori livelli di compromissione nella demenza avanzata</label>\n          <div class=\"col-md-6 col-lg-5\">\n            <label class=\"ui-radio\"><input ng-change=\"formData.UlcdaVanzata={code:'op7a',score:0}\" ng-model=\"formData.UlcdaVanzata.code\" value=\"op7a\" type=\"radio\"><span>Profonda</span></label>\n            <label class=\"ui-radio\"><input ng-change=\"formData.UlcdaVanzata={code:'op7b',score:0}\" ng-model=\"formData.UlcdaVanzata.code\" value=\"op7b\" type=\"radio\"><span>Terminale</span></label>\n            <input summary=\"CDRUlcdaVanzata\" ng-model=\"formData.UlcdaVanzata.score\" ng-show=\"false\" type=\"number\">\n          </div>\n        </div>\n      </div>\n    </div>\n    <p id=\"demo\"></p>\n    <div class=\"row\">\n      <div class=\"col-md-12 col-lg-12\">\n        <div class=\"form-group\">\n          <b><label class=\"col-md-12 col-lg-12\">PUNTEGGI CALCOLATI</label></b>\n          <label class=\"col-md-3 col-lg-3\">CDR - Clinical Dementia Rating Scale</label>\n          <div class=\"col-md-2 col-lg-3\">\n            <input class=\"form-control\" concept=\"scoreCDRTotale\" summary ng-model=\"formData.scoreCDRTotale\" type=\"number\" readonly>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>",
  "javascript": "var calcoloCDR = function () {\n  var superiore = 0, minore = 0, uguale = 0;\n  var  sommaMemoria = 0;\n  var sommaOrientamento = 0;\n  var sommaProblemi = 0;\n  var sommaAttSociali = 0;\n  var sommaAttDomestiche = 0;\n  var sommaCuraPersonale = 0;\n\n  if(formData.Memoria != null)\n    sommaMemoria=formData.Memoria.score;\n  if(formData.Orientamento != null)\n    sommaOrientamento=formData.Orientamento.score;\n  if(formData.GRProblemi != null)\n    sommaProblemi=formData.GRProblemi.score;\n  if(formData.ASociale != null)\n    sommaAttSociali=formData.ASociale.score;\n  if(formData.ADomestiche != null)\n    sommaAttDomestiche=formData.ADomestiche.score;\n  if(formData.CPersonale != null)\n    sommaCuraPersonale=formData.CPersonale.score;\n\n  var arrayValoriCDR= [sommaMemoria,sommaOrientamento,sommaProblemi,sommaAttSociali,sommaAttDomestiche,sommaCuraPersonale];\n\n  var superiori = [];\n  var minori = [];\n  for (var i = 1; i < arrayValoriCDR.length; i++) {\n    if (arrayValoriCDR[i] > arrayValoriCDR[0]) {\n      superiore++;\n      superiori.push(arrayValoriCDR[i]);\n    }\n    if (arrayValoriCDR[i] < arrayValoriCDR[0]) {\n      minore++;\n      minori.push(arrayValoriCDR[i]);\n    }\n    if (arrayValoriCDR[i] == arrayValoriCDR[0]) {\n      uguale++;\n    }\n  }\n\n  if (uguale >= 3) {\n    formData.scoreCDRTotale = sommaMemoria;\n  }\n\n  else if (superiore == 2 && minore == 2) {\n    formData.scoreCDRTotale = sommaMemoria;\n\n  } else if (superiore >= 3 || minore >= 3) {\n    var max_freq_sup = 0;\n    var max_sup = 0;\n    for(var element=0; element < superiori.length-1; element++) {\n      var freq_sup = 1;\n      var second_element=element+1;\n      for(; second_element < superiori.length; second_element++ ) {\n        if(superiori[element]==superiori[second_element]) {\n          freq_sup=freq_sup+1;\n        }\n      }\n      if(freq_sup > max_freq_sup) {\n        max_freq_sup = freq_sup;\n        max_sup = superiori[element];\n      }\n    }  \n\n    var max_freq_min = 0;\n    var max_min = 0;\n    for(element=0; element < minori.length-1; element++) {\n      var freq_min = 1;\n      var sec_element=element+1;\n      for(; sec_element < minori.length; sec_element++ ) {\n        if(minori[element]==minori[sec_element]) {\n          freq_min=freq_min+1;\n        }\n      }\n      if(freq_min > max_freq_min) {\n        max_freq_min = freq_min;\n        max_min = minori[element];\n      }\n    }\n\n    if(superiori.length > minori.length || minori.length == 0) {\n      formData.scoreCDRTotale = max_sup;\n    }\n    else if (minori.length > superiori.length || superiori.length == 0 ){\n      formData.scoreCDRTotale = max_min;\n\n    }  \n  }\n  else {\n    formData.scoreCDRTotale = sommaMemoria;\n  }\n};\n\nregisterFunction(\"calcoloCDR\",calcoloCDR);\n",
  "css": null,
  "version": 1,
  "status": "DRAFT",
  "bundleValues": {
    "it_IT": {
      "CDRASociale": "",
      "CDRUlcdaVanzata": "",
      "CDROrientamento": "",
      "ADomesticheAltro": "",
      "CDRMemoria": "",
      "CDRADomestiche": "",
      "CDRGRProblemi": "",
      "OrientamentoAltro": "",
      "MemoriaAltro": "",
      "CDRCPersonale": "",
      "GRProblemiAltro": "",
      "CPersonaleAltro": "",
      "ASocialeAltro": ""
    },
    "en_GB": {
      "CDRASociale": "",
      "CDRUlcdaVanzata": "",
      "CDROrientamento": "",
      "ADomesticheAltro": "",
      "CDRMemoria": "",
      "CDRADomestiche": "",
      "CDRGRProblemi": "",
      "OrientamentoAltro": "",
      "MemoriaAltro": "",
      "CDRCPersonale": "",
      "GRProblemiAltro": "",
      "CPersonaleAltro": "",
      "ASocialeAltro": ""
    },
    "es_ES": {
      "CDRASociale": "",
      "CDRUlcdaVanzata": "",
      "CDROrientamento": "",
      "ADomesticheAltro": "",
      "CDRMemoria": "",
      "CDRADomestiche": "",
      "CDRGRProblemi": "",
      "OrientamentoAltro": "",
      "MemoriaAltro": "",
      "CDRCPersonale": "",
      "GRProblemiAltro": "",
      "CPersonaleAltro": "",
      "ASocialeAltro": ""
    },
    "de_DE": {
      "CDRASociale": "",
      "CDRUlcdaVanzata": "",
      "CDROrientamento": "",
      "ADomesticheAltro": "",
      "CDRMemoria": "",
      "CDRADomestiche": "",
      "CDRGRProblemi": "",
      "OrientamentoAltro": "",
      "MemoriaAltro": "",
      "CDRCPersonale": "",
      "GRProblemiAltro": "",
      "CPersonaleAltro": "",
      "ASocialeAltro": ""
    }
  },
  "templateFileName": null,
  "templateApplications": {},
  "repositoryEnabled": null,
  "signatureEnabled": null,
  "signatureNotMandatory": null,
  "sendTxtEnabled": null,
  "sendPrivacyEnabled": null,
  "cda2Enabled": null,
  "cda2Xlts": null,
  "cancellableEnabled": null,
  "saveAsDraftWhenInvalid": null
}]
